apiVersion: v1
kind: Pod
metadata:
  name: {{ name }}
  labels:
      app: {{ name }}
spec:
  imagePullSecrets:
    - name: "registrysecret"
  containers:
  - name: {{ name }}
    image: {{ image }}
    volumeMounts:
    - name: {{ name }}-configmap-volume
      mountPath: /opt/corda/node.conf
      subPath: node.conf
    - name: {{ name }}-certificates-secret-volume
      mountPath: /opt/corda/certificates
  
  volumes:
  - name: {{ name }}-configmap-volume
    configMap:
      name: {{ name }}-configmap
  - name: {{ name }}-certificates-secret-volume
    secret:
      secretName: {{ name }}-certificates-secret

  restartPolicy: Never