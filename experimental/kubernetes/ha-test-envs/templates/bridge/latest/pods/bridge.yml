apiVersion: v1
kind: Pod
metadata:
  name: {{ name }}
  labels:
      app: {{ name }}
spec:
  imagePullSecrets:
    - name: "registrysecret"
  containers:
  - name: {{ name }}
    image: {{ image }}
    volumeMounts:
    - name: {{ name }}-configmap-volume
      mountPath: /opt/corda-firewall/firewall.conf
      subPath: firewall.conf
    - name: network-parameters-secret-volume
      mountPath: /opt/corda-firewall/network-parameters
      subPath: network-parameters

  volumes:
  - name: {{ name }}-configmap-volume
    configMap:
      name: {{ name }}-configmap
  - name: network-parameters-secret-volume
    secret:
      secretName: network-parameters-secret

  restartPolicy: Never