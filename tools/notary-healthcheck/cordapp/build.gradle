apply plugin: 'kotlin'
apply plugin: 'net.corda.plugins.cordapp'
apply plugin: 'net.corda.plugins.quasar-utils'
apply plugin: 'net.corda.plugins.publish-utils'
apply plugin: 'com.jfrog.artifactory'

sourceSets {
    integrationTest {
        kotlin {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/integration-test/kotlin')
        }
    }
}

dependencies {
    cordaCompile project(":node") // Not node-api so we get metrics.
    cordapp project(":tools:notary-healthcheck:contract")
    testCompile project(":node-driver")
    testImplementation "junit:junit:$junit_version"
    testRuntimeOnly "org.junit.vintage:junit-vintage-engine:${junit_vintage_version}"
    testRuntimeOnly "org.junit.platform:junit-platform-launcher:${junit_platform_version}"
}

configurations {
    integrationTestCompile.extendsFrom testCompile
    integrationTestRuntimeOnly.extendsFrom testRuntimeOnly
}

cordapp {
    info {
        vendor "R3"
        version corda_release_version
        targetPlatformVersion corda_platform_version.toInteger()
        minimumPlatformVersion 1
    }
}

cordapp {
    info {
        name "net/corda/notary-healthcheck/cordapp"
        vendor "R3"
        targetPlatformVersion corda_platform_version.toInteger()
        minimumPlatformVersion 1
    }
}


publish {
    name "corda-notary-healthcheck-cordapp"
}
